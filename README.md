# Loan Management API

Простое REST API для управления займами. Позволяет создавать, читать, обновлять и удалять займы в соответствии с указанными данными/фильтрами.
Автоматически логирует все подключения и ошибки приложения, потому способен отрабатывать как примитивный отдельный веб-сервер.
Поддерживаемые форматы данных: JSON

## API Endpoints

- `GET /loans/{id}` - Получить информацию по указанному займу
- `GET /loans` - Получение списка всех займов с базовыми фильтрами по дате создания и сумме.
- `GET /users` - Получение списка клиентов
- `POST /loans` - Создать новый займ
- `PUT /loans/{id}` - Обновить информацию по указанному займу
- `DELETE /loans/{id}` - Удалить указанный займ

## Примеры

`POST /loans` || `PUT /loans/{id}`

Принимает следующие параметры
`int` user_id - ID пользователя из `GET /users/{id}`
`int` amount - сумма займа
`int` create_time - дата создания
`int` pay_time - дата выплаты

```json
{
"user_id": 123,
"amount": 1000,
"create_time": 1630473600,
"pay_time": 1633075600
}
```

`GET /loans/{id}`
```json
{
    "status": true,
    "message": "data got successfull",
    "details": [
        {
            "id": "1",
            "user_id": "1",
            "amount": "3000",
            "create_time": "1716590548",
            "pay_time": "1716590548",
            "first_name": "Евгений",
            "last_name": "Захаров",
            "phone": "+79012345678",
            "birth_date": "1997-04-18"
        }
    ]
}
```
Ошибка
```json
{
    "status": false,
    "message": "can't get data by specified data"
}
```
## Использованные технологии

- PHP микрофреймворк: [Slim](https://github.com/slimphp/Slim)
- Линтер: [PHP_CodeSniffer](https://github.com/squizlabs/PHP_CodeSniffer)

## Запуск приложения

1. Клонировать репозиторий.
2. Установить зависимости с помощью команды `composer install`.
3. Настроить подключение к базе данных через файл `config.ini`
4. Запустить миграцию `php artisan migrate`.
5. Запустить сервер с помощью команды `php -S localhost:8000 -t public` **ИЛИ **настроив соответствующий роут/виртуальный хост в конфигурации используемого веб-сервера (Пр. Apache, файл .htaccess в репозитории имеет нужные настройки)
6. Теперь можно пользоваться приложением `http://localhost:8000`.

## Тестирование

Запустить тесты можно с помощью `vendor/bin/phpunit`.  Все тесты лежат в директории `tests`.Тесты покрывают базовые кейсы API.
Проверить приложение на соответствие PSR можно с помощью линтера.

## Развёртывание

Приложение можно развернуть на любой хостинговой платформе, поддерживающей PHP, например Heroku, AWS, Google Cloud, DigitalOcean или Yandex Cloud. Обязательно настройте переменные среды и соединение с базой данных соответствующим образом.
